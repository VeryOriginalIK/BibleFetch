<div class="space-y-8 animate-fade-in-content">

  <!-- Üdvözlő szekció -->
  <section class="text-center py-6">
    <h2 class="text-3xl font-serif font-bold text-gray-800 dark:text-gray-100 mb-2">
      {{ state.currentLang() === 'hu' ? 'Fedezd fel az Igét' : 'Discover the Word' }}
    </h2>
    <p class="text-gray-500 dark:text-gray-400 max-w-md mx-auto">
      {{ state.currentLang() === 'hu'
        ? 'Válassz egy témát a lenti gyűjteményből, és mélyülj el az eredeti jelentésekben.'
        : 'Choose a topic below and dive deep into the original meanings.' }}
    </p>
  </section>

  <!-- Téma Rács -->
  <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 pb-8">

    <!-- ASYNC PIPE: Automatikusan kezeli a fel/leiratkozást -->
    @if (topics$ | async; as topics) {

      @for (topic of topics; track topic.id) {
        <!-- Kártya -->
        <!-- A [routerLink] később a TopicViewer-re visz majd -->
        <a [routerLink]="['/topic', topic.id]"
           class="group relative bg-white dark:bg-gray-800 rounded-3xl p-5 shadow-sm hover:shadow-xl transition-all duration-300 border border-gray-100 dark:border-gray-700 flex flex-col items-center justify-center text-center aspect-[4/5] cursor-pointer active:scale-95">

          <!-- Ikon Háttérrel -->
          <div class="w-14 h-14 rounded-2xl mb-4 flex items-center justify-center text-white shadow-lg transition-transform group-hover:scale-110 group-hover:-rotate-3"
               [style.backgroundColor]="topic.theme_color">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" [attr.d]="getIconPath(topic.icon)" />
            </svg>
          </div>

          <!-- Cím -->
          <h3 class="font-bold text-lg text-gray-800 dark:text-gray-100 mb-1 leading-tight">
            {{ topic.titles[state.currentLang()] }}
          </h3>

          <!-- Versszám -->
          <span class="text-xs text-gray-400 font-medium bg-gray-50 dark:bg-gray-700/50 px-2.5 py-1 rounded-full mt-2">
            {{ topic.verse_ids.length }} {{ state.currentLang() === 'hu' ? 'vers' : 'verses' }}
          </span>

        </a>
      }

    } @else {
      <!-- LOADING SKELETON (Amíg a JSON tölt) -->
      @for (i of [1,2,3,4,5,6]; track i) {
        <div class="bg-gray-200 dark:bg-gray-800 rounded-3xl animate-pulse aspect-[4/5]"></div>
      }
    }

  </div>
</div>

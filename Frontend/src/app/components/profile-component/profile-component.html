<div class="max-w-2xl mx-auto p-4 pb-24">
  <h2 class="text-2xl font-bold mb-6">Profil & Gy≈±jtem√©nyek</h2>

  <!-- Status message -->
  @if (status()) {
    <div class="mb-4 p-3 rounded-lg bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-sm">
      {{ status() }}
    </div>
  }

  <!-- Auth status card -->
  <section class="mb-6 p-4 rounded-xl bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700">
    <h3 class="font-semibold text-lg mb-2">üë§ Fi√≥k</h3>
    @if (auth.isLoggedIn()) {
      <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
        Bejelentkezve: <strong>{{ auth.user()?.email }}</strong>
      </p>
      <button (click)="auth.signOut()" class="px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white text-sm font-medium transition">
        Kijelentkez√©s
      </button>
    } @else {
      <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">
        Nincs bejelentkezve. L√©pj be a felh≈ë-szinkroniz√°l√°shoz.
      </p>
      <a routerLink="/auth" class="inline-block px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium transition">
        Bejelentkez√©s / Regisztr√°ci√≥
      </a>
    }
  </section>

  <!-- Export / Import section -->
  <section class="mb-6 p-4 rounded-xl bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700">
    <h3 class="font-semibold text-lg mb-3">üì• Export / Import</h3>
    <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">Mentsd el a gy≈±jtem√©nyedet f√°jlba vagy import√°lj m√°sik eszk√∂zr≈ël.</p>
    <div class="flex gap-2 flex-wrap">
      <button (click)="exportCollections()" class="px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium transition">
        Export√°l√°s (JSON)
      </button>
      <label class="px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium transition cursor-pointer">
        Import (JSON)
        <input type="file" accept="application/json" (change)="importFile($event)" class="hidden" />
      </label>
    </div>
  </section>

  <!-- Supabase sync section -->
  <section class="mb-6 p-4 rounded-xl bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700">
    <h3 class="font-semibold text-lg mb-3">‚òÅÔ∏è Felt√∂lt√©s a felh≈ëbe</h3>
    @if (!auth.isLoggedIn()) {
      <p class="text-sm text-amber-600 dark:text-amber-400 mb-3">A szinkroniz√°l√°s bejelentkez√©st ig√©nyel.</p>
    }
    <div class="flex gap-2 flex-wrap">
      <button (click)="syncToSupabase()" class="px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium transition">
        Szinkroniz√°l√°s ‚Üí Szerver
      </button>
      <button (click)="loadFromSupabase()" class="px-4 py-2 rounded-lg bg-purple-600 hover:bg-purple-700 text-white text-sm font-medium transition">
        Bet√∂lt√©s ‚Üê Szerver
      </button>
    </div>
  </section>

  <!-- Public collections management -->
  <section class="mb-6 p-4 rounded-xl bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700">
    <div class="flex items-center justify-between mb-3">
      <h3 class="font-semibold text-lg">üåê Nyilv√°nos Gy≈±jtem√©nyek</h3>
      <a routerLink="/public-collections" class="text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 font-medium">
        B√∂ng√©sz√©s ‚Üí
      </a>
    </div>

    @if (!auth.isLoggedIn()) {
      <p class="text-sm text-amber-600 dark:text-amber-400 mb-3">A megoszt√°s bejelentkez√©st ig√©nyel.</p>
    } @else {
      <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
        Tedd nyilv√°noss√° a gy≈±jtem√©nyeidet, hogy m√°sok is haszn√°lhass√°k ≈ëket!
      </p>

      @if (collections().length === 0) {
        <p class="text-sm text-gray-500 dark:text-gray-400">M√©g nincsenek gy≈±jtem√©nyek.</p>
      } @else {
        <div class="space-y-2 max-h-96 overflow-y-auto">
          @for (collection of collections(); track collection.id) {
            <div class="flex items-center justify-between p-3 rounded-lg bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600">
              <div class="flex-1 min-w-0 mr-3">
                <p class="font-medium truncate">{{ collection.name }}</p>
                <p class="text-xs text-gray-500 dark:text-gray-400">
                  {{ collection.verse_ids.length }} vers
                  @if (collection.is_public) {
                    <span class="ml-2 text-green-600 dark:text-green-400">‚óè Nyilv√°nos</span>
                  }
                </p>
              </div>
              <button
                (click)="togglePublicStatus(collection.id, collection.is_public || false)"
                class="px-3 py-1 rounded-lg text-sm font-medium transition whitespace-nowrap"
                [ngClass]="collection.is_public
                  ? 'bg-gray-500 hover:bg-gray-600 text-white'
                  : 'bg-green-600 hover:bg-green-700 text-white'"
              >
                {{ collection.is_public ? 'Priv√°t' : 'Nyilv√°nos' }}
              </button>
            </div>
          }
        </div>
      }
    }
  </section>

  <!-- Info section -->
  <section class="p-4 rounded-xl bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800">
    <h3 class="font-semibold text-lg mb-2">‚ÑπÔ∏è Megjegyz√©s</h3>
    <ul class="text-sm text-gray-700 dark:text-gray-300 space-y-1 list-disc list-inside">
      <li>A <strong>frontend statikus</strong> ‚Äî gy≈±jtem√©nyek alap√©rtelmezetten <code>localStorage</code>-ban t√°rol√≥dnak.</li>
      <li>Az <strong>export/import</strong> offline is m≈±k√∂dik ‚Äî .json f√°jlba menti.</li>
    </ul>
  </section>
</div>


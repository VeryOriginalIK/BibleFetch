<span class="verse-content">
  @for (item of parsedWords; track $index) {
    @if (item.strongCodes.length > 0) {
      <span class="word-with-strong cursor-pointer hover:text-blue-600 transition-colors" (mouseenter)="onHover(item.strongCodes)" (click)="openDefinition(item.strongCodes[0], $event)">
        {{ item.word }}
        <span class="tooltip-bubble">
          @for (code of item.strongCodes; track code) {
            <div class="strong-entry">
              <span class="strong-header">
                {{ code }}
                @if (getDef(code)?.lemma) {
                  <span class="lemma-text">- {{ getDef(code)?.lemma }}</span>
                }
              </span>

              @if (isLoading(code)) {
                <div class="loading-text">Betöltés...</div>
              }

              @if (getDef(code); as def) {
                <div class="def-content">
                  @if (def.translit) {
                    <div class="pronunciation">/{{ def.translit }}/</div>
                  }
                  <div class="definition-text">
                    {{ def.defs[state.lang()] || def.defs['en'] }}
                  </div>
                </div>
              }

              @if (!isLoading(code) && !getDef(code)) {
                <div class="error-text">Nincs adat.</div>
              }
            </div>
          }
        </span>
      </span>
    } @else {
      <span class="simple-word">{{ item.word }}</span>
    }

    @if (item.punctuation) {
      <span class="punctuation">{{ item.punctuation }}</span>
    }
    <span class="space">&nbsp;</span>
  }
</span>
